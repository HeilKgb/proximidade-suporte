(function(e,i){"function"==typeof define&&define.amd?define([],i):e.PdfThumbnail=i()})(this,function(){return function(e,i,t,n){if("undefined"==typeof PDFJS)throw Error("pdf.js is not loaded. Please include it before pdfThumbnails.js.");if(PDFJS.disableWorker=!0,i=i||"jpeg",t=t||.92,!e||"png"!==i&&"jpeg"!==i)return!1;var a=document.createElement("CANVAS");n=null==n?100:n;image.width,image.height;a.width=n,a.height=n;var h=image.width-image.height,r=0,o=0,d=image.width,g=image.height;h>0?(r=h/2,d=g):h<0&&(o=-h/2,g=d),console.log(r,o),console.log(g,d);var f=a.getContext("2d"),l={x:r,y:o,width:d,height:g},m={x:0,y:0,width:n,height:n};f.drawImage(image,l.x,l.y,l.width,l.height,m.x,m.y,m.width,m.height);for(var w=a.toDataURL("image/"+i,t),u=w.split(",")[1],s=w.split(";")[0].slice(5),c=window.atob(u),p=new ArrayBuffer(c.length),y=new Uint8Array(p),b=0;b<c.length;b++)y[b]=c.charCodeAt(b);var v=new Blob([y],{type:s});return{blob:v,dataUri:w,format:i}}});