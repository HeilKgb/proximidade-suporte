(function(e,t){"function"==typeof define&&define.amd?define([],t):e.captureVideoFrame=t()})(this,function(){return function(e,t,i,n){if("string"==typeof e&&(e=document.getElementById(e)),t=t||"jpeg",i=i||.92,!e||"png"!==t&&"jpeg"!==t)return!1;var d=document.createElement("CANVAS");n=null==n?100:n;e.videoWidth,e.videoHeight;d.width=n,d.height=n;var h=e.videoWidth-e.videoHeight,r=0,o=0,a=e.videoWidth,g=e.videoHeight;h>0?(r=h/2,a=g):h<0&&(o=-h/2,g=a);var f=d.getContext("2d"),u={x:r,y:o,width:a,height:g},l={x:0,y:0,width:n,height:n};f.drawImage(e,u.x,u.y,u.width,u.height,l.x,l.y,l.width,l.height);for(var v=d.toDataURL("image/"+t,i),w=v.split(",")[1],c=v.split(";")[0].slice(5),y=window.atob(w),m=new ArrayBuffer(y.length),p=new Uint8Array(m),s=0;s<y.length;s++)p[s]=y.charCodeAt(s);var x=new Blob([p],{type:c});return{blob:x,dataUri:v,format:t}}});